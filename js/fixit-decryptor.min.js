FixItDecryptor=function(e={}){var n,s,t=FixItDecryptor.prototype;this.options=e||{},this.options.duration=this.options.duration||24*60*60,this.decryptedEventSet=new Set,this.partialDecryptedEventSet=new Set,this.resetEventSet=new Set,this.$el=document.querySelector(".fixit-decryptor-container"),n=(e,t,n=!0)=>{try{n?(this.$el.querySelector(".fixit-decryptor-loading").classList.add("d-none"),this.$el.querySelector(".fixit-decryptor-input").classList.add("d-none"),this.$el.querySelector(".fixit-decryptor-btn").classList.add("d-none"),this.$el.querySelector(".fixit-encryptor-btn").classList.remove("d-none")):e.parentElement.classList.add("decrypted"),e.insertAdjacentHTML("afterbegin",CryptoJS.enc.Base64.parse(e.getAttribute("data-content").replace(t,"")).toString(CryptoJS.enc.Utf8))}catch(e){return console.error(e)}const s=n?this.decryptedEventSet:this.partialDecryptedEventSet;for(const t of s)t(e)},s=(e,t,n)=>{const a=t.getAttribute("data-password"),o=e.querySelector(".fixit-decryptor-input"),s=o.value.trim(),i=CryptoJS.MD5(s).toString(),r=CryptoJS.SHA256(s).toString(),c=s.length%2?s.length:s.length+1;if(o.value="",o.blur(),!s)return alert("Please enter the correct password!"),console.warn("Please enter the correct password!");if(i!==a)return alert(`Password error: ${s} not the correct password!`),console.warn(`Password error: ${s} not the correct password!`);n(i,r.slice(c))},t.init=()=>{this.addEventListener("decrypted",this.options?.decrypted),this.addEventListener("partial-decrypted",this.options?.partialDecrypted),this.addEventListener("reset",this.options?.reset),this.validateCache();const e=()=>{const e=document.querySelector("#content");s(this.$el,e,(t,s)=>{window.localStorage?.setItem(`fixit-decryptor/#${location.pathname}`,JSON.stringify({expiration:Math.ceil(Date.now()/1e3)+this.options.duration,password:t,salt:s})),n(e,s)})};this.$el.querySelector("#fixit-decryptor-input")?.addEventListener("keydown",t=>{t.key==="Enter"&&(t.preventDefault(),e())}),this.$el.querySelector(".fixit-decryptor-btn")?.addEventListener("click",t=>{t.preventDefault(),e()}),this.$el.querySelector(".fixit-encryptor-btn")?.addEventListener("click",e=>{e.preventDefault(),e.target.classList.add("d-none"),this.$el.querySelector(".fixit-decryptor-input").classList.remove("d-none"),this.$el.querySelector(".fixit-decryptor-btn").classList.remove("d-none"),document.querySelector("#content").innerHTML="",document.querySelector("#content").insertAdjacentElement("afterbegin",this.$el),window.localStorage?.removeItem(`fixit-decryptor/#${location.pathname}`);for(const e of this.resetEventSet)e()})},t.initShortcodes=()=>{customElements.get("fixit-encryptor")||customElements.define("fixit-encryptor",class extends HTMLElement{});const e=document.querySelectorAll("fixit-encryptor:not(:has(.decrypted))");e.forEach(e=>{const t=()=>{const o=e.querySelector(".fixit-decryptor-container"),t=e.querySelector("[data-password][data-content]");s(o,t,(e,s)=>{n(t,s,!1)})};e.querySelector(".fixit-decryptor-input")?.addEventListener("keydown",function(e){e.key==="Enter"&&(e.preventDefault(),t())}),e.querySelector(".fixit-decryptor-btn")?.addEventListener("click",function(e){e.preventDefault(),t()})})},t.validateCache=()=>{const t=document.querySelector("#content"),s=t.getAttribute("data-password"),e=JSON.parse(window.localStorage?.getItem(`fixit-decryptor/#${location.pathname}`));return e?e?.password!==s||Number(e?.expiration)<Math.ceil(Date.now()/1e3)?(this.$el.querySelector(".fixit-decryptor-loading").classList.add("d-none"),this.$el.querySelector(".fixit-decryptor-input").classList.remove("d-none"),window.localStorage?.removeItem(`fixit-decryptor/#${location.pathname}`),console.warn("The password has expired, please re-enter!"),this):(n(t,e.salt),this):(this.$el.querySelector(".fixit-decryptor-loading").classList.add("d-none"),this.$el.querySelector(".fixit-decryptor-input").classList.remove("d-none"),this.$el.querySelector(".fixit-decryptor-btn").classList.remove("d-none"),this)},t.addEventListener=(e,t)=>{if(typeof t!="function")return this;switch(e){case"decrypted":this.decryptedEventSet.add(t);break;case"partial-decrypted":this.partialDecryptedEventSet.add(t);break;case"reset":this.resetEventSet.add(t);break;default:console.warn(`Event ${e} not found in FixIt Decryptor!`);break}return this},t.removeEventListener=(e,t)=>{if(typeof t!="function")return this;switch(e){case"decrypted":this.decryptedEventSet.delete(t);break;case"partial-decrypted":this.partialDecryptedEventSet.delete(t);break;case"reset":this.resetEventSet.delete(t);break;default:console.warn(`Event ${e} not found in FixIt Decryptor!`);break}return this}}